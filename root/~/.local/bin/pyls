#!/usr/bin/env bash
set -euo pipefail
VENV="${XDG_DATA_HOME}/venv/lsp"

[[ -d "${VENV}" ]] || python3 -m venv "${VENV}"
cd "${VENV}"
source ./bin/activate

[[ -f ./bin/pyls ]] || python3 -m pip install "python-language-server[autopep8,mccabe,pycodestyle,pydocstyle,pyflakes,rope,yapf]" pyls-mypy pyls-isort
./bin/pyls "$@"
