#!/usr/bin/env bash
set -euo pipefail

NAME="${1:-}"
ZONE="us-central1-a"

while getopts 'n:z:' flag; do
  case "${flag}" in
    n) NAME="${OPTARG}"                  ;;
    z) ZONE="${OPTARG}"                  ;;
    *) echo "Unexpected option ${flag}";
       exit 1                            ;;
  esac
done

[[ -z "${NAME}" ]] && { echo "NAME is unset"; exit 1; }
[[ -z "${ZONE}" ]] && { echo "ZONE is unset"; exit 1; }

gcloud config set container/cluster "${NAME}"
gcloud container clusters get-credentials "${NAME}" --zone="${ZONE}"
